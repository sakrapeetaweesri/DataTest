kjsККњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨ߷þ߳RYR}Гњþ߳RYR}НШњþ߳RYR}НШњþ߳RYR}ггњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨ߷þ߳ݳгњ߹ݝШћï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߵߦߧ߰þ߳ݝжњþ߳ݳњ߹ݝжњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߵߥ߮þ݈߳њ߹݈Мяþ߳ݝњ߹ݘЈњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨ߬þ߳ݳњ߹RYc\њþ߳ݸњ߹RYc\њï߳݌ߩχ߻χ߶ݏߊχЯï߳RYah@hר߼þ݈߳њï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߧþ߳ݛѝњþ߳ݓњ߹ݛѝњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߺߧߦþ߳M|OkRYf]Шњþ߳M|OkRYf]НШњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߥþ߳dIGijsНИњþ߳dIGijsОњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߴߥþ߳}`VEC_НМњþ߳}`VEC_ГГњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݨߦ߹߷þ߳ݨмњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߼߽ߨþ߳ݏНЭнњþ߳ݳњ߹ݏНЭнњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߦߧ߲߳þ߳ݧммњþ߳ݧгњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߧ߹߼þ߳Svwp\aBYњþ߳݌њï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧþ߳A_Q]^sЯњþ߳A_Q]^sмњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߦߨߥþ߳ݝМњ߹A_Fv[iC_њþ߳A_Fv[iC_њ߹݇іþ߳݊ћњ߹A_Fv[iC_њï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߵ߬߮þ߳DfvnZadMЊгњþ߳DfvnZadMНгњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߵ߮ߧߥ߮ߥþ߳ݯʮЯʮњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߲߰þ߳ovBrBnDfRkЯњþ߳ovBrBnDfRkМњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߲߽þ߳DfRkpgМњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߬ߥþ߳DfdxC_Ињï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߧ߬ߵDfA_Gijsߧߧ߬ߵþ߳݇њþ߳ݓњ߹݇њï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߦþ߳ݓњ߹ݝЇћþ߳ݘћњ߹НЇћï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߼߼߬þ߳dd[XBnDcg`OgC_PKCeXvymFt@CГњþ߳dd[XBnDcg`OgC_PKCeXvymFt@CГњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߥ߸ߦߧߥþ߳iOwgdBtNd{C_ȗњþ߳iOwgdBtNd{C_Оњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߴߨ߬þ߳A_Q]h_psмњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߼߰þ߳DfOgињï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߼ߥߦߨ߰þ߳ݑњþ߳ݑѝњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߸߹߬ߵþ߳VEGRBniOu`[TGijsињþ߳VEGRBniOu`[TGijsЯњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߬߬߰þ߳iOcNNбњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߬߷þ߳iOOKJmНГњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߽߫߬þ̝߳њþ߳ݘњ߹̝њï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߫߫þ߳iO[V_}Ымњþ߳iO[V_}Ќгѝï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߽߽߫߳߼þ߳݋гњþ߳݋нињþ߳݋нЫњþ߳݋нЫњþ߳ݧгњþ߳ݧнињþ߳ݧнЫњþ߳ݧнЫњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߫ߥþ߳ݝЛњþ߳ݓњ߹ݝЛњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧߨ߻þ߳iOhQCqНЗђњï߳݌ߩχ߻χ߶ݏߊχЯï߳ݧ߲߬þ߳ݜњ߹݊њï߳݌ߩχ߻χ      EditorGUI.BeginChangeCheck();
                EditorGUILayout.PropertyField(m_RemoveStartOffsetProperty, Styles.RemoveStartOffset);
                if (EditorGUI.EndChangeCheck())
                {
                    TimelineEditor.Refresh(RefreshReason.ContentsAddedOrRemoved);
                    Repaint();
                }
            }
        }

        void Reevaluate()
        {
            if (m_TimelineWindow != null && m_TimelineWindow.state != null)
            {
                m_TimelineWindow.state.Refresh();
                m_TimelineWindow.state.EvaluateImmediate();
            }
        }

        // Make sure the director time is within the bounds of the clip
        void SetTimeToClip()
        {
            if (m_TimelineWindow != null && m_TimelineWindow.state != null)
            {
                m_TimelineWindow.state.editSequence.time = Math.Min(m_EditorClip.clip.end, Math.Max(m_EditorClip.clip.start, m_TimelineWindow.state.editSequence.time));
            }
        }

        public void OnEnable()
        {
            if (target == null) // case 946080
                return;

            m_EditorClip = UnityEditor.Selection.activeObject as EditorClip;
            m_EditorClips = UnityEditor.Selection.objects.OfType<EditorClip>().ToArray();
            SceneView.duringSceneGui += OnSceneGUI;

            m_PositionProperty = serializedObject.FindProperty("m_Position");
            m_PositionProperty.isExpanded = true;
            m_RotationProperty = serializedObject.FindProperty("m_EulerAngles");
            m_AnimClipProperty = serializedObject.FindProperty("m_Clip");
            m_UseTrackMatchFieldsProperty = serializedObject.FindProperty("m_UseTrackMatchFields");
            m_MatchTargetFieldsProperty = serializedObject.FindProperty("m_MatchTargetFields");
            m_RemoveStartOffsetProperty = serializedObject.FindProperty("m_RemoveStartOffset");
            m_ApplyFootIK = serializedObject.FindProperty("m_ApplyFootIK");
            m_Loop = serializedObject.FindProperty("m_Loop");

            m_LastPosition = m_PositionProperty.vector3Value;
            m_LastRotation = m_RotationProperty.vector3Value;
        }

        void OnDestroy()
        {
            SceneView.duringSceneGui -= OnSceneGUI;
        }

        void OnSceneGUI(SceneView sceneView)
        {
            DoManipulators();
        }

        Transform GetTransform()
        {
            if (m_Binding != null)
                return m_Binding.transform;

            if (m_TimelineWindow != null &&  m_TimelineWindow.state != null &&
                m_TimelineWindow.state.editSequence.director != null &&
                m_EditorClip != null && m_EditorClip.clip != null)
            {
                var obj = TimelineUtility.GetSceneGameObject(m_TimelineWindow.state.editSequence.director,
                    m_EditorClip.clip.GetParentTrack());
                m_Binding = obj;
                if (obj != null)
                    return obj.transform;
            }
            return null;
        }

        void DoManipulators()
        {
            if (m_EditorClip == null || m_EditorClip.clip == null)
                return;

            AnimationPlayableAsset animationPlayable = m_EditorClip.clip.asset as AnimationPlayableAsset;
            AnimationTrack track = m_EditorClip.clip.GetParentTrack() as AnimationTrack;
            Transform transform = GetTransform();

            if (transform != null && animationPlayable != null && m_OffsetEditMode != TimelineAnimationUtilities.OffsetEditMode.None && track != null)
            {
                UndoExtensions.RegisterPlayableAsset(animationPlayable, L10n.Tr("Inspector"));
                Vector3 position = transform.position;
                Quaternion rotation = transform.rotation;

                EditorGUI.BeginChangeCheck();
                if (m_OffsetEditMode == TimelineAnimationUtilities.OffsetEditMode.Translation)
                {
                    position = Handles.PositionHandle(position, Tools.pivotRotation == PivotRotation.Global ? Quaternion.identity : rotation);
                }
                else if (m_OffsetEditMode == TimelineAnimationUtilities.OffsetEditMode.Rotation)
                {
                    rotation = Handles.RotationHandle(rotation, position);
                }

                if (EditorGUI.EndChangeCheck())
                {
                    var res = TimelineAnimationUtilities.UpdateClipOffsets(animationPlayable, track, transform, position, rotation);
                    animationPlayable.position = res.position;
                    animationPlayable.eulerAngles = AnimationUtility.GetClosestEuler(res.rotation, animationPlayable.eulerAngles, RotationOrder.OrderZXY);
                    Reevaluate();
                    Repaint();
                }
            }
        }

        void ShowAnimationClipWarnings()
        {
            AnimationClip clip = m_AnimClipProperty.objectReferenceValue as AnimationClip;
            if (clip == null)
            {
                EditorGUILayout.HelpBox(AnimationPlayableAssetEditor.k_NoClipAssignedError, MessageType.Warning);
            }
            else if (clip.legacy)
            {
                EditorGUILayout.HelpBox(AnimationPlayableAssetEditor.k_LegacyClipError, MessageType.Warning);
            }
        }

        bool ShouldShowOffsets()
        {
            return targets.OfType<AnimationPlayableAsset>().All(x => x.hasRootTransforms);
        }

        void ShowRecordableClipRename()
        {
            if (targets.Length > 1 || m_EditorClip == null || m_EditorClip.clip == null || !m_EditorClip.clip.recordable)
                return;

            AnimationClip clip = m_AnimClipProperty.objectReferenceValue as AnimationClip;
            if (clip == null || !AssetDatabase.IsSubAsset(clip))
                return;

            if (m_SerializedAnimClip == null)
            {
                m_SerializedAnimClip = new SerializedObject(clip);
                m_SerializedAnimClipName = m_SerializedAnimClip.FindProperty("m_Name");
            }

            if (m_SerializedAnimClipName != null)
            {
                m_SerializedAnimClip.Update();
                EditorGUI.BeginChangeCheck();
                EditorGUILayout.DelayedTextField(m_SerializedAnimClipName, Styles.AnimationClipName);
                if (EditorGUI.EndChangeCheck())
                    m_SerializedAnimClip.ApplyModifiedProperties();
            }
        }
    }
}
                       AnimationPlayableAssetInspector    UnityEditor.Timeline